var repo = {},
	n = 0;

jsgit.bindTo(repo);

// sample commit

function performRepoLoad() {
	gitMountObject('{"557db03de997c86a4a028e1ebd3a1ceb225be238":{"0":98,"1":108,"2":111,"3":98,"4":32,"5":49,"6":50,"7":0,"8":72,"9":101,"10":108,"11":108,"12":111,"13":32,"14":87,"15":111,"16":114,"17":108,"18":100,"19":10},"648fc86e8557bdabbc2c828a19535f833727fa62":{"0":116,"1":114,"2":101,"3":101,"4":32,"5":52,"6":48,"7":0,"8":49,"9":48,"10":48,"11":54,"12":52,"13":52,"14":32,"15":103,"16":114,"17":101,"18":101,"19":116,"20":105,"21":110,"22":103,"23":46,"24":116,"25":120,"26":116,"27":0,"28":85,"29":125,"30":176,"31":61,"32":233,"33":151,"34":200,"35":106,"36":74,"37":2,"38":142,"39":30,"40":189,"41":58,"42":28,"43":235,"44":34,"45":91,"46":226,"47":56},"19b3283956c6d50903463573250707664ee64e92":{"0":99,"1":111,"2":109,"3":109,"4":105,"5":116,"6":32,"7":49,"8":55,"9":54,"10":0,"11":116,"12":114,"13":101,"14":101,"15":32,"16":54,"17":52,"18":56,"19":102,"20":99,"21":56,"22":54,"23":101,"24":56,"25":53,"26":53,"27":55,"28":98,"29":100,"30":97,"31":98,"32":98,"33":99,"34":50,"35":99,"36":56,"37":50,"38":56,"39":97,"40":49,"41":57,"42":53,"43":51,"44":53,"45":102,"46":56,"47":51,"48":51,"49":55,"50":50,"51":55,"52":102,"53":97,"54":54,"55":50,"56":10,"57":97,"58":117,"59":116,"60":104,"61":111,"62":114,"63":32,"64":84,"65":105,"66":109,"67":32,"68":67,"69":97,"70":115,"71":119,"72":101,"73":108,"74":108,"75":32,"76":60,"77":116,"78":105,"79":109,"80":64,"81":99,"82":114,"83":101,"84":97,"85":116,"86":105,"87":111,"88":110,"89":105,"90":120,"91":46,"92":99,"93":111,"94":109,"95":62,"96":32,"97":49,"98":52,"99":49,"100":57,"101":56,"102":51,"103":56,"104":52,"105":51,"106":54,"107":32,"108":45,"109":48,"110":54,"111":48,"112":48,"113":10,"114":99,"115":111,"116":109,"117":109,"118":105,"119":116,"120":116,"121":101,"122":114,"123":32,"124":84,"125":105,"126":109,"127":32,"128":67,"129":97,"130":115,"131":119,"132":101,"133":108,"134":108,"135":32,"136":60,"137":116,"138":105,"139":109,"140":64,"141":99,"142":114,"143":101,"144":97,"145":116,"146":105,"147":111,"148":110,"149":105,"150":120,"151":46,"152":99,"153":111,"154":109,"155":62,"156":32,"157":49,"158":52,"159":49,"160":57,"161":56,"162":51,"163":56,"164":52,"165":51,"166":54,"167":32,"168":45,"169":48,"170":54,"171":48,"172":48,"173":10,"174":10,"175":84,"176":101,"177":115,"178":116,"179":32,"180":99,"181":111,"182":109,"183":109,"184":105,"185":116,"186":10}}',
		function () {
			console.log(arguments);
		});
}

function performCommitSample() {
	console.log('\nseq ' + ++n + '\n', gitExportObject());
	console.debug('  file');
	repo.saveAs("blob", "Hello World\n", function (err, blobHash) {
		console.log('blob', blobHash);
		console.log('\nseq ' + ++n + '\n', gitExportObject());
		console.debug('  virtual file system');
		repo.saveAs("tree", {
			"greeting.txt": { mode: modes.file, hash: blobHash }
		}, function (err, treeHash) {
			console.log('tree', treeHash);
			console.log('\nseq ' + ++n + '\n', gitExportObject());
			console.debug('  commit reference');
			repo.saveAs("commit", {
				author: {
					name: "Tim Caswell",
					email: "tim@creationix.com"
				},
				tree: treeHash,
				message: "Test commit\n"
			}, function (err, commitHash) {
				console.log('commit', commitHash);
				console.log('\nseq ' + ++n + '\n', gitExportObject());

			});
		});
	});
}


function performGetCommit() {
	loadCommit('19b3283956c6d50903463573250707664ee64e92');
}

function loadCommit(c) {
	repo.loadAs('commit', c, function (err, data) {
		console.log(err, data);
	});
}